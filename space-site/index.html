<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìš°ì£¼ ì‚¬ì´íŠ¸</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- ë³„ì„ ê·¸ë¦´ ìº”ë²„ìŠ¤ -->
  <canvas id="space"></canvas>

  <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œ -->
  <script>
    // 1. ìº”ë²„ìŠ¤ë¥¼ ê°€ì ¸ì™€ì„œ ê·¸ë¦¬ê¸° ì¤€ë¹„
    const canvas = document.getElementById('space');
    const ctx = canvas.getContext('2d'); // ìº”ë²„ìŠ¤ì— ê·¸ë¦¼ì„ ê·¸ë¦¬ëŠ” ë„êµ¬

    // 2. ìº”ë²„ìŠ¤ í¬ê¸°ë¥¼ í™”ë©´ í¬ê¸°ì™€ ë§ì¶¤
    let width = canvas.width = window.innerWidth;
    let height = canvas.height = window.innerHeight;

    // 3. ë³„ ì—¬ëŸ¬ ê°œ ë§Œë“¤ê¸°
    const stars = [];
    const starCount = 80; // ë³„ì˜ ê°œìˆ˜

    for (let i = 0; i < starCount; i++) {
      stars.push({
        x: Math.random() * width,  // í˜„ì¬ ìœ„ì¹˜
        y: Math.random() * height,
        baseX: 0, // ì›ë˜ ìœ„ì¹˜ ì €ì¥
        baseY: 0,
        radius: Math.random() * 2 + 1 // ë°˜ì§ì´ í¬ê¸°
      });
    }

    // ë³„ë“¤ì´ ë§Œë“¤ì–´ì§„ í›„, baseX/baseY ì„¤ì •
    stars.forEach(star => {
      star.baseX = star.x;
      star.baseY = star.y;
    });

    // 4. ë§ˆìš°ìŠ¤ ìœ„ì¹˜ ì €ì¥
    let mouse = { x: width / 2, y: height / 2 };

    window.addEventListener('mousemove', e => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
    });

    // 5. ë³„ ê·¸ë¦¬ê¸° í•¨ìˆ˜
    function draw() {
      ctx.clearRect(0, 0, width, height); // í™”ë©´ ì§€ìš°ê¸°

      for (let star of stars) {
        // ë§ˆìš°ìŠ¤ì™€ ë³„ ì‚¬ì´ ê±°ë¦¬ ê³„ì‚°
        const dx = mouse.x - star.x;
        const dy = mouse.y - star.y;
        const dist = Math.sqrt(dx * dx + dy * dy);

        // ê°€ê¹Œìš°ë©´ ì„  ì—°ê²°
        if (dist < 150) {
          ctx.beginPath();
          ctx.strokeStyle = `rgba(255,255,255,${1 - dist / 150})`; // íˆ¬ëª…ë„
          ctx.moveTo(star.x, star.y);
          ctx.lineTo(mouse.x, mouse.y);
          ctx.stroke();
        }

        // ë³„ ê·¸ë¦¬ê¸°
        ctx.beginPath();
        ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
        ctx.fillStyle = 'white';
        ctx.fill();

        // ğŸ’¡ ë§ˆìš°ìŠ¤ ë°©í–¥ìœ¼ë¡œ ì‚´ì§ ì›€ì§ì˜€ë‹¤ê°€ ì›ë˜ ìœ„ì¹˜ë¡œ ë˜ëŒì•„ì˜¤ê¸°
        const followStrength = 0.03; // ì–¼ë§ˆë‚˜ ë”°ë¼ê°ˆì§€ (ìˆ«ìê°€ í´ìˆ˜ë¡ ë” ë”°ë¼ê°)
        const returnStrength = 0.01; // ì›ë˜ ìë¦¬ë¡œ ëŒì•„ê°€ëŠ” í˜

        // ë§ˆìš°ìŠ¤ ë°©í–¥ìœ¼ë¡œ ì‚´ì§
        star.x += (mouse.x - star.x) * followStrength;

        // ì›ë˜ ìë¦¬ë¡œ ì¡°ê¸ˆì”© ë˜ëŒì•„ì˜¤ê¸°
        star.x += (star.baseX - star.x) * returnStrength;
        star.y += (mouse.y - star.y) * followStrength;
        star.y += (star.baseY - star.y) * returnStrength;
      }

      requestAnimationFrame(draw); // ë§¤ í”„ë ˆì„ë§ˆë‹¤ ê·¸ë¦¬ê¸° ë°˜ë³µ
    }

    draw();

    // ì°½ í¬ê¸° ë°”ë€Œë©´ ìº”ë²„ìŠ¤ë„ ì¡°ì •
    window.addEventListener('resize', () => {
      width = canvas.width = window.innerWidth;
      height = canvas.height = window.innerHeight;
    });
  </script>
</body>
</html>
