<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>우주 사이트</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- 별을 그릴 캔버스 -->
  <canvas id="space"></canvas>

  <!-- 자바스크립트 코드 -->
  <script>
    // 1. 캔버스를 가져와서 그리기 준비
    const canvas = document.getElementById('space');
    const ctx = canvas.getContext('2d'); // 캔버스에 그림을 그리는 도구

    // 2. 캔버스 크기를 화면 크기와 맞춤
    let width = canvas.width = window.innerWidth;
    let height = canvas.height = window.innerHeight;

    // 3. 별 여러 개 만들기
    const stars = [];
    const starCount = 80; // 별의 개수

    for (let i = 0; i < starCount; i++) {
      stars.push({
        x: Math.random() * width,  // 현재 위치
        y: Math.random() * height,
        baseX: 0, // 원래 위치 저장
        baseY: 0,
        radius: Math.random() * 2 + 1 // 반짝이 크기
      });
    }

    // 별들이 만들어진 후, baseX/baseY 설정
    stars.forEach(star => {
      star.baseX = star.x;
      star.baseY = star.y;
    });

    // 4. 마우스 위치 저장
    let mouse = { x: width / 2, y: height / 2 };

    window.addEventListener('mousemove', e => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
    });

    // 5. 별 그리기 함수
    function draw() {
      ctx.clearRect(0, 0, width, height); // 화면 지우기

      for (let star of stars) {
        // 마우스와 별 사이 거리 계산
        const dx = mouse.x - star.x;
        const dy = mouse.y - star.y;
        const dist = Math.sqrt(dx * dx + dy * dy);

        // 가까우면 선 연결
        if (dist < 150) {
          ctx.beginPath();
          ctx.strokeStyle = `rgba(255,255,255,${1 - dist / 150})`; // 투명도
          ctx.moveTo(star.x, star.y);
          ctx.lineTo(mouse.x, mouse.y);
          ctx.stroke();
        }

        // 별 그리기
        ctx.beginPath();
        ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
        ctx.fillStyle = 'white';
        ctx.fill();

        // 💡 마우스 방향으로 살짝 움직였다가 원래 위치로 되돌아오기
        const followStrength = 0.03; // 얼마나 따라갈지 (숫자가 클수록 더 따라감)
        const returnStrength = 0.01; // 원래 자리로 돌아가는 힘

        // 마우스 방향으로 살짝
        star.x += (mouse.x - star.x) * followStrength;

        // 원래 자리로 조금씩 되돌아오기
        star.x += (star.baseX - star.x) * returnStrength;
        star.y += (mouse.y - star.y) * followStrength;
        star.y += (star.baseY - star.y) * returnStrength;
      }

      requestAnimationFrame(draw); // 매 프레임마다 그리기 반복
    }

    draw();

    // 창 크기 바뀌면 캔버스도 조정
    window.addEventListener('resize', () => {
      width = canvas.width = window.innerWidth;
      height = canvas.height = window.innerHeight;
    });
  </script>
</body>
</html>
